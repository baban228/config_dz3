# README для скрипта

Этот скрипт предназначен для обработки YAML-данных и их преобразования в пользовательский формат. Скрипт читает YAML-текст, извлекает константы и выражения, и преобразует их в специфический синтаксис, добавляя поддержку комментариев. Скрипт также обрабатывает вычисления и выводит результат в соответствии с заданными правилами.

## Описание работы

Скрипт выполняет несколько основных функций:

1. **Парсинг YAML-данных**: Извлекает данные из YAML-файла и проверяет их на ошибки синтаксиса.
2. **Преобразование в пользовательский синтаксис**: Конвертирует данные YAML в пользовательский формат с учетом констант и выражений.
3. **Обработка комментариев**: Преобразует комментарии в YAML в определенный формат.
4. **Обработка выражений**: Преобразует вычисления и выражения в результирующий текст.
   
### Основные этапы работы:

1. Чтение YAML-данных из стандартного ввода.
2. Преобразование данных в специфический формат.
3. Преобразование комментариев в определенный стиль (если длина комментария больше 50 символов, используется другой формат).
4. Вывод результата с комментариями и преобразованными данными.

## Установка и требования

Для работы скрипта требуется:

- Python 3.x
- Библиотека `PyYAML` (для работы с YAML)

Чтобы установить зависимость, используйте pip:

```bash
pip install pyyaml
```

## Использование

1. Сохраните скрипт в файл, например `convert_yaml.py`.
2. Передайте YAML-текст через стандартный ввод или укажите путь к файлу, используя команду:

   ```bash
   python convert_yaml.py < input.yaml
   ```

   Или для использования файла:

   ```bash
   cat input.yaml | python convert_yaml.py
   ```

3. Скрипт выведет результат в стандартный вывод, где будут отображены преобразованные данные и комментарии.

## Формат YAML

Для корректной работы скрипта, YAML-файл должен содержать стандартные данные в формате ключ-значение. Пример структуры YAML:

```yaml
consts:
  PI: 3.1415
  E: 2.718

variables:
  radius: 5
  area: ^{radius * radius * PI}   # Выражение для вычисления площади круга
  message: "Hello, world!"

calculation: ^{radius * radius * PI}  # Выражение для вычисления площади круга
```

В этом примере:
- В разделе `consts` задаются константы.
- В разделе `variables` определяются переменные и выражения.
- В разделе `calculation` содержится выражение, которое будет вычисляться и преобразовываться.

## Пример

**Входные данные (input.yaml):**

```yaml
consts:
  PI: 3.1415
  radius: 2.718
variables:
  area: ^{radius * radius * PI}   # Выражение для вычисления площади круга
  message: "Hello, world!"
calculation: ^{radius * radius * PI}  # Выражение для вычисления площади круга
```

**Выходные данные:**

```plaintext
const PI = 3.1415;
const radius = 2.718;
variables:
  area = ^{radius * radius * PI};
  message = "Hello, world!";
calculation = 23.2079066;

+/ Выражение для вычисления площади круга/+
```

## Функции

- **parse_yaml(input_text)**: Преобразует строку YAML в объект Python. В случае ошибки синтаксиса вызывает исключение и завершает работу.
- **convert_to_custom_language(data, consts=None)**: Рекурсивно преобразует данные в пользовательский синтаксис.
- **convert_dict(data, consts=None)**: Преобразует словарь в пользовательский синтаксис.
- **convert_list(data, consts=None)**: Преобразует список в пользовательский синтаксис.
- **convert_consts(consts)**: Преобразует раздел констант в соответствующий синтаксис.
- **convert_expression(expression, consts)**: Преобразует выражение в вычисляемый результат, если оно начинается с `^`.
- **process_comments(input_text)**: Преобразует комментарии YAML в соответствующий формат (одинарный или в стиле `+/.../+`).
- **process_yaml(input_text)**: Основная функция для обработки YAML данных и их преобразования в конечный формат.

## Ошибки

- **yaml.YAMLError** — ошибка синтаксиса YAML.
- **ValueError** — ошибка при обработке неизвестных типов данных или некорректных выражений.
- **SyntaxError** — ошибка при выполнении выражений или при вычислениях.


